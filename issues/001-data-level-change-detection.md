# データレベルの変更検出機能の実装

## 目的
ファイル内容やデータベーススキーマの変更を検出し、必要に応じてパイプラインを再実行できるようにする。

## 背景
現在の差分検出システムは、設定ファイル（YAML）レベルでの構造変更のみを検出している。しかし、実際のデータパイプラインでは以下の変更も重要な再実行トリガーとなる：

### 検出されない重要な変更
1. **ファイルデータの変更**
   - CSVファイルの内容が更新されても検出されない
   - ファイルパスが同じであれば変更として認識されない

2. **データベーススキーマの変更**
   - テーブルの列が追加・削除・変更されても検出されない
   - データ型の変更が検出されない

3. **データ内容の実質的変更**
   - データ量の大幅な増減
   - データの質の変化（NULL値の増加など）

### 現在のコード制限
- `src/config/adapter.rs:12-16`の`has_changed`実装は設定のみを比較
- `src/dependency.rs:16-128`の`detect_changes`はYAML設定ファイルの差分のみ検出

## 期待する結果

### 1. ファイルベースの変更検出
- ファイルのハッシュ値（MD5/SHA256）による内容変更検出
- ファイル更新日時の追跡
- ファイルサイズの変更検出

### 2. データベーススキーマ変更検出
- テーブルスキーマの比較機能
- 列の追加・削除・型変更の検出
- インデックスや制約の変更検出

### 3. データ品質メトリクス
- 行数の変化の検出
- NULL値率の変化
- データ分布の変化（オプション）

### 4. 実装方針
- `AdapterConfig`に`content_hash`や`schema_version`フィールドを追加
- `detect_changes`関数でファイル・DB内容も比較
- 新しいエンティティ`content_snapshots`でデータ状態を追跡

### 5. 設定例
```yaml
# adapters/users.yml
source:
  type: file
  file:
    path: /data/users.csv
  format:
    type: csv
# 自動生成される追跡情報
_tracking:
  content_hash: "a1b2c3d4e5f6..."
  last_modified: "2024-01-15T10:30:00Z"
  row_count: 10000
```
